<div
  class="flex flex-grow items-center p-6 lg:p-12 justify-center bg-primary-special2 w-full lg:w-1/2"
>
  <div
    class="max-w-full p-8 bg-primary-dark rounded-lg shadow-lg w-96 text-primary-semiLight"
  >
    <div class="flex items-center mb-6">
      <svg
        class="h-8 w-8 text-primary-special stroke-current"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"
        />
      </svg>
      <h4 class="font-semibold ml-3 text-lg">Votre to-do list</h4>
    </div>

    <ul class="flex gap-3 flex-col">
      <% tasks.forEach((task, index) => { %>

      <div id="<%= index %>" class="select-none">
        <div
          class="relative border border-primary-semiLight border-1 rounded-md"
        >
          <input
            class="hidden"
            type="checkbox"
            name="id"
            value="<%= index %>"
            checked
          />
          <label class="flex items-center min-h-[2.5rem] h-fit px-2 rounded" for="task_6">
            <form method="post" action="/complete/">
              <Button
                class="flex items-center justify-center w-5 h-5 text-transparent border-2 border-gray-500 rounded-full hover:cursor-pointer hover:border-primary-semiLight svgChanger <%= task.completed ? "text-white" : "" %>"
                type="submit"
                name="listToComplete"
                value="<%= index %>"
              >
                <svg
                  class="w-4 h-4 fill-current"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                    clip-rule="evenodd"
                  />
                </svg>
              </Button>
            </form>
            <span class="ml-4 text-sm"
              ><%= task.number %> - Created at : <%= task.created_at %></span
            >
            <form method="post" action="/delete/" class="flex items-center">
              <button class="absolute right-2" type="submit" name="id"
              value="<%= index %>">❌</button>
            </form>
          </label>
        </div>
      </div>

      <% }); %>
    </ul>

    <a
      href="/details"
      class="flex gap-5 items-center w-fit h-full py-2 pl-3 pr-5 mt-5 text-sm font-medium rounded bg-primary-special text-primary-dark hover:text-primary-light focus:ring-4 focus:ring-primary-semiLight focus:cursor-pointer"
    >
      <svg
        class="w-6 h-6 fill-current"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 1000 1000"
        stroke="currentColor"
      >
        <path
          d="M665.8,849.6l306.2-306.2c23.9-23.9,23.9-62.7,0-86.6L665.8,150.4c-23.9-23.9-62.7-23.9-86.6,0c-23.9,23.9-23.9,62.7,0,86.6l201.7,201.7H71.3C37.4,438.7,10,466.2,10,500s27.4,61.3,61.3,61.3h709.6L579.2,762.9c-12,12-17.9,27.6-17.9,43.3s6,31.3,17.9,43.3C603.1,873.5,641.9,873.5,665.8,849.6z"
        />
      </svg>
      <span>La To-do list en détail</span>
    </a>
  </div>
</div>

<script>
  const svgElements = document.querySelectorAll(".svgChanger");

  svgElements.forEach((svgElement) => {
    svgElement.addEventListener("click", function () {
      svgElement.classList.toggle("text-white");
    });
  });
</script>
